<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Image Component Library (ICL): icl::io::ImageCompressor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icl-logo-50.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Image Component Library (ICL)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceicl.html">icl</a></li><li class="navelem"><a class="el" href="namespaceicl_1_1io.html">io</a></li><li class="navelem"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html">ImageCompressor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classicl_1_1io_1_1ImageCompressor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">icl::io::ImageCompressor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Encoder class for optimized encoding of images.  
 <a href="classicl_1_1io_1_1ImageCompressor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ImageCompressor_8h_source.html">ImageCompressor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for icl::io::ImageCompressor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classicl_1_1io_1_1ImageCompressor.png" usemap="#icl::io::ImageCompressor_map" alt=""/>
  <map id="icl::io::ImageCompressor_map" name="icl::io::ImageCompressor_map">
<area href="classicl_1_1utils_1_1Uncopyable.html" title="Class interface for un-copyable classes." alt="icl::utils::Uncopyable" shape="rect" coords="0,0,187,24"/>
<area href="structicl_1_1io_1_1ImageOutput.html" title="Minimal interface for image output classes." alt="icl::io::ImageOutput" shape="rect" coords="0,112,187,136"/>
<area href="classicl_1_1io_1_1FileWriter.html" title="File Writer implementation writing images to the hard disc." alt="icl::io::FileWriter" shape="rect" coords="197,168,384,192"/>
<area href="classicl_1_1io_1_1GenericImageOutput.html" title="Generic Sink for images." alt="icl::io::GenericImageOutput" shape="rect" coords="197,224,384,248"/>
<area href="classicl_1_1io_1_1LibAVVideoWriter.html" alt="icl::io::LibAVVideoWriter" shape="rect" coords="197,280,384,304"/>
<area href="classicl_1_1io_1_1OpenCVVideoWriter.html" alt="icl::io::OpenCVVideoWriter" shape="rect" coords="197,336,384,360"/>
<area href="classicl_1_1io_1_1RSBImageOutput.html" title="image output implementation using the &quot;Robotics Service Bus (RSB)&quot;" alt="icl::io::RSBImageOutput" shape="rect" coords="197,392,384,416"/>
<area href="classicl_1_1io_1_1SharedMemoryPublisher.html" title="Publisher, that can be used to publish images via SharedMemorySegment." alt="icl::io::SharedMemoryPublisher" shape="rect" coords="197,448,384,472"/>
<area href="classicl_1_1io_1_1V4L2LoopBackOutput.html" title="ImageOutput implementation for V4L2-Looback devices." alt="icl::io::V4L2LoopBackOutput" shape="rect" coords="197,504,384,528"/>
<area href="classicl_1_1io_1_1ZmqImageOutput.html" title="image output implementation using the ZeroMQ (ZMQ) framwork" alt="icl::io::ZmqImageOutput" shape="rect" coords="197,560,384,584"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressedData.html">CompressedData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">most simple dyn-size array with given data and length  <a href="structicl_1_1io_1_1ImageCompressor_1_1CompressedData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">compression specification  <a href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header.html">Header</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compressed image header.  <a href="structicl_1_1io_1_1ImageCompressor_1_1Header.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae3a0241f139e815084f27611968a069e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#ae3a0241f139e815084f27611968a069e">ImageCompressor</a> (const <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a> &amp;spec=<a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a>(&quot;none&quot;))</td></tr>
<tr class="memdesc:ae3a0241f139e815084f27611968a069e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an image Compressor with given compression mode.  <a href="classicl_1_1io_1_1ImageCompressor.html#ae3a0241f139e815084f27611968a069e">More...</a><br /></td></tr>
<tr class="separator:ae3a0241f139e815084f27611968a069e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cee8ca152dcfd72716582be618352b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#a4cee8ca152dcfd72716582be618352b9">~ImageCompressor</a> ()</td></tr>
<tr class="memdesc:a4cee8ca152dcfd72716582be618352b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classicl_1_1io_1_1ImageCompressor.html#a4cee8ca152dcfd72716582be618352b9">More...</a><br /></td></tr>
<tr class="separator:a4cee8ca152dcfd72716582be618352b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1151fe5ebd8cea891c17cf22afc2aba1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#a1151fe5ebd8cea891c17cf22afc2aba1">setCompression</a> (const <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a> &amp;spec)</td></tr>
<tr class="memdesc:a1151fe5ebd8cea891c17cf22afc2aba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">string based interface for setting the compression mode  <a href="classicl_1_1io_1_1ImageCompressor.html#a1151fe5ebd8cea891c17cf22afc2aba1">More...</a><br /></td></tr>
<tr class="separator:a1151fe5ebd8cea891c17cf22afc2aba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057e4f8a5262994edae663f7ccff6bf8"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#a057e4f8a5262994edae663f7ccff6bf8">getCompression</a> () const</td></tr>
<tr class="memdesc:a057e4f8a5262994edae663f7ccff6bf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">can be implemented for returning the current compression mode  <a href="classicl_1_1io_1_1ImageCompressor.html#a057e4f8a5262994edae663f7ccff6bf8">More...</a><br /></td></tr>
<tr class="separator:a057e4f8a5262994edae663f7ccff6bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af50cbec5921604a347033e60a8806800"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classicl_1_1utils_1_1Time.html">utils::Time</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#af50cbec5921604a347033e60a8806800">pickTimeStamp</a> (const <a class="el" href="namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> *compressedData)</td></tr>
<tr class="memdesc:af50cbec5921604a347033e60a8806800"><td class="mdescLeft">&#160;</td><td class="mdescRight">this can help to find out wheter the data is new and must be encoded  <a href="classicl_1_1io_1_1ImageCompressor.html#af50cbec5921604a347033e60a8806800">More...</a><br /></td></tr>
<tr class="separator:af50cbec5921604a347033e60a8806800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4832af18926ba99a5b69b49b41e0658"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressedData.html">CompressedData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#af4832af18926ba99a5b69b49b41e0658">compress</a> (const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *image, bool skipMetaData=false)</td></tr>
<tr class="memdesc:af4832af18926ba99a5b69b49b41e0658"><td class="mdescLeft">&#160;</td><td class="mdescRight">encodes a given image into the compressed code  <a href="classicl_1_1io_1_1ImageCompressor.html#af4832af18926ba99a5b69b49b41e0658">More...</a><br /></td></tr>
<tr class="separator:af4832af18926ba99a5b69b49b41e0658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ab44152554eb8732165d664bdf8f7d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#af6ab44152554eb8732165d664bdf8f7d">uncompress</a> (const <a class="el" href="namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> *compressedData, int len, <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> **dst=0)</td></tr>
<tr class="memdesc:af6ab44152554eb8732165d664bdf8f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">decodes the given byte segment  <a href="classicl_1_1io_1_1ImageCompressor.html#af6ab44152554eb8732165d664bdf8f7d">More...</a><br /></td></tr>
<tr class="separator:af6ab44152554eb8732165d664bdf8f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa591ff4c764f4d8ee9e9f682653916c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header.html">Header</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#aa591ff4c764f4d8ee9e9f682653916c0">uncompressHeader</a> (const <a class="el" href="namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> *compressedData, int len)</td></tr>
<tr class="memdesc:aa591ff4c764f4d8ee9e9f682653916c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">only decodes an image header  <a href="classicl_1_1io_1_1ImageCompressor.html#aa591ff4c764f4d8ee9e9f682653916c0">More...</a><br /></td></tr>
<tr class="separator:aa591ff4c764f4d8ee9e9f682653916c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac0eba98b27523928b2a20c17a630861"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header.html">Header</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#aac0eba98b27523928b2a20c17a630861">createHeader</a> (const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *image, bool skipMetaData)</td></tr>
<tr class="memdesc:aac0eba98b27523928b2a20c17a630861"><td class="mdescLeft">&#160;</td><td class="mdescRight">creates a header for a given image (not data will be null)  <a href="classicl_1_1io_1_1ImageCompressor.html#aac0eba98b27523928b2a20c17a630861">More...</a><br /></td></tr>
<tr class="separator:aac0eba98b27523928b2a20c17a630861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classicl_1_1utils_1_1Uncopyable"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classicl_1_1utils_1_1Uncopyable')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classicl_1_1utils_1_1Uncopyable.html">icl::utils::Uncopyable</a></td></tr>
<tr class="memitem:a1c68786f58d59f0274f5834b98df48ea inherit pro_methods_classicl_1_1utils_1_1Uncopyable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1utils_1_1Uncopyable.html#a1c68786f58d59f0274f5834b98df48ea">Uncopyable</a> ()</td></tr>
<tr class="memdesc:a1c68786f58d59f0274f5834b98df48ea inherit pro_methods_classicl_1_1utils_1_1Uncopyable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty base constructor.  <a href="classicl_1_1utils_1_1Uncopyable.html#a1c68786f58d59f0274f5834b98df48ea">More...</a><br /></td></tr>
<tr class="separator:a1c68786f58d59f0274f5834b98df48ea inherit pro_methods_classicl_1_1utils_1_1Uncopyable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab2585bc0db8b90968cb84ada4e6042ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#ab2585bc0db8b90968cb84ada4e6042ff">estimateEncodedBufferSize</a> (const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *image, bool skipMetaData)</td></tr>
<tr class="memdesc:ab2585bc0db8b90968cb84ada4e6042ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">internal utlity function  <a href="classicl_1_1io_1_1ImageCompressor.html#ab2585bc0db8b90968cb84ada4e6042ff">More...</a><br /></td></tr>
<tr class="separator:ab2585bc0db8b90968cb84ada4e6042ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a568a5f162cc0263eb7796d85f07faa5a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#a568a5f162cc0263eb7796d85f07faa5a">estimateRawDataSize</a> (const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *image, bool skipMetaData)</td></tr>
<tr class="memdesc:a568a5f162cc0263eb7796d85f07faa5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">internal utlity function  <a href="classicl_1_1io_1_1ImageCompressor.html#a568a5f162cc0263eb7796d85f07faa5a">More...</a><br /></td></tr>
<tr class="separator:a568a5f162cc0263eb7796d85f07faa5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a780265d7f7ba201a4de25b22da56a0f2"><td class="memItemLeft" align="right" valign="top">Data *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicl_1_1io_1_1ImageCompressor.html#a780265d7f7ba201a4de25b22da56a0f2">m_data</a></td></tr>
<tr class="memdesc:a780265d7f7ba201a4de25b22da56a0f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">pimpl type  <a href="classicl_1_1io_1_1ImageCompressor.html#a780265d7f7ba201a4de25b22da56a0f2">More...</a><br /></td></tr>
<tr class="separator:a780265d7f7ba201a4de25b22da56a0f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Encoder class for optimized encoding of images. </p>
<p>The <a class="el" href="classicl_1_1io_1_1ImageCompressor.html" title="Encoder class for optimized encoding of images.">ImageCompressor</a> class allows for simple and for optimized serialization and desirealization of images</p>
<h1><a class="anchor" id="MODES"></a>
Serialization Modes</h1>
<p>Right now, 4 different serialization modes are supported.</p><ul>
<li>"rlen" Run Length Encoding: here, the image is scanned line by line and instead of encoding pixel data [ pix1, pix2, pix3, ...], it is encoded by [value|length] pairs. Which means, that the <em>value</em> was found <em>length+1</em> times in the image data. This type of compression is very well suited for images with low structure and in particular for low noise binary images. However, it fails completely for natual camera images. The "rlen" plugin supports four different quality settings, where each setting determines the number of bits, that are used for the <em>value</em> and for <em>lenght</em> tokens.<ul>
<li>Quality 1: value: 1Bit, length 7Bit. This <a class="el" href="group__TYPES.html#ga7cc417c2bd265954eaa29e4a17977410" title="determines the color-format, that is associated with the images channels">core::format</a> is most appropriate for binary images with low noise. Here, a compression to 1% of the original size can easily be reached. Please note, that the binarization threshold is explicitly set to 127 for this quality level. For the other quality levels, only the most significant bits are used.</li>
<li>Quality 4: value: 4Bit, length 4Bit. Can be used to compress with remaining 4Bit value resolution (usually, this is only needed for very special cases) The compression is usually also worse since the maximum reachable compression ration is 1/(2^4).</li>
<li>Quality 6: value 6Bit, length 2Bit. Bad compression ratio, but an visibly almost lossless compression.</li>
<li>Quality 8: value 8Bit, length 8Bit. Best for non-binary images with lots of homogeneous regions. Lossless, but not neccessarily better than uncompressed serialization. Best case: 1/(2^8) compression, Worst case: 2/1.</li>
</ul>
</li>
<li>"dith" Works as rlen, but before sending, the image is dithered</li>
<li>"jpeg" uses jpeg compression. Comparable to motion jpeg and only available if ICL has been build with LIBJPEG support. The compression quality can be varied from 0 to 100. Which is the default JPEG compression quality value. Usually values around 70 provide sufficient results with a very good compression ration (about 2%). However, please note that even a quality setting of 100 does not lead to lossless compression.<ul>
<li>"1611" compresses unsigned 16-bit images to 11-bit packed continuous data. The result is a pointer to an unsigned 16-bit-array<ul>
<li>Quality 0: Cuts the upper 5 bits (only values up to 2^11 are supported)</li>
<li>Quality 1: Compresses 16-bit arrays to 11-bit packed arrays as follows: D = (a/Z)+b and uncompresses Z = a/(D-b) (See <a class="el" href="classicl_1_1io_1_1Kinect11BitCompressor.html">Kinect11BitCompressor</a> for details)</li>
</ul>
</li>
</ul>
</li>
<li>"none" Uncompressed image serialization. This is the only compression mode, that can be used for non-core::Img8u images.</li>
</ul>
<h1><a class="anchor" id="DEPTH"></a>
Depth Support</h1>
<p>Only <a class="el" href="group__TYPES.html#gab9ebfd5e35116d194189c8f233607414" title="typedef for 8bit integer images">core::Img8u</a>-images can be compressed. For all other formats, the compression mode "none" (with quality setting "none") has to be chosen.</p>
<h1><a class="anchor" id="SERIALIZATION"></a>
Serialization Structure</h1>
<p>The serialized image consists of 3 parts: The <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header.html" title="Compressed image header.">Header</a> information, which is exactly the binarized version of <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header_1_1Params.html">ImageCompressor::Header::Params</a>. Optionally meta data, whose length can also be 0. And the actual compressed image data. The lengths of the meta data and the image data segements are defined by the header.</p>
<h1><a class="anchor" id="META"></a>
Image Meta Data</h1>
<p>The <a class="el" href="classicl_1_1io_1_1ImageCompressor.html" title="Encoder class for optimized encoding of images.">ImageCompressor</a> preserves an images meta data, however meta data is always binarized in an uncompressed manner.</p>
<h1><a class="anchor" id="ROI"></a>
ROI-Support</h1>
<p>The image ROI is also compressed and later uncompressed. So if you compress an image with a non-full ROI, the uncompressed version will also be the whole image with a non-full ROI.</p>
<h1><a class="anchor" id="BENCH"></a>
Benchmarks:</h1>
<p>There are several factors, that have to be regarded: image size image fragmentation (b/w noise)</p>
<p>Both, the encoding /decoding steps should scale linearily with the image pixel count, while extremely vertical images provide in slower results. Also the image fragmentation is important for the en-/de-coding speed. Benchmarks were take on an Intel (R) Xeon E5530 @2.40GHz CPU, only single channel images were used.</p>
<ul>
<li>VGA image, high noise: compression to 20%: encoding 3msec, decoding 2msec</li>
<li>VGA image, low noise: compression to 5%: encoding 1msec, decoding 0.8msec</li>
<li>VGA image, very low noise: compression to 1.7%: encoding 0.4msec, decoding 0.37msec</li>
<li>SXVGA (4-times VGA), high noise, compression to 22%: encoding 8.4msec, decoding 7.8msec</li>
<li>SXVGA (4-times VGA), low noise, compression to 4.1%: encoding 2.0msec, decoding 1.8msec</li>
<li>SXVGA (4-times VGA), very low noise, compression to 1.4%: encoding 0.8msec, decoding 0.76mse</li>
</ul>
<h1><a class="anchor" id="MEM"></a>
Memory Consumption</h1>
<p>In order to avoid run-time memory allocation, the run-length coder always ensures that enough bytes are available: I.e. 1 byte per image pixel</p><ul>
<li>header size of 37 + N bytes (N is meta data size)<br  />
for JPEG data, 2x the raw image data is allocated </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae3a0241f139e815084f27611968a069e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3a0241f139e815084f27611968a069e">&#9670;&nbsp;</a></span>ImageCompressor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">icl::io::ImageCompressor::ImageCompressor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a> &amp;&#160;</td>
          <td class="paramname"><em>spec</em> = <code><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a>(&quot;none&quot;)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an image Compressor with given compression mode. </p>

</div>
</div>
<a id="a4cee8ca152dcfd72716582be618352b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cee8ca152dcfd72716582be618352b9">&#9670;&nbsp;</a></span>~ImageCompressor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">icl::io::ImageCompressor::~ImageCompressor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af4832af18926ba99a5b69b49b41e0658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4832af18926ba99a5b69b49b41e0658">&#9670;&nbsp;</a></span>compress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressedData.html">CompressedData</a> icl::io::ImageCompressor::compress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skipMetaData</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>encodes a given image into the compressed code </p>
<p>JPEG compression does not yet meta data </p>

</div>
</div>
<a id="aac0eba98b27523928b2a20c17a630861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac0eba98b27523928b2a20c17a630861">&#9670;&nbsp;</a></span>createHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header.html">Header</a> icl::io::ImageCompressor::createHeader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skipMetaData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>creates a header for a given image (not data will be null) </p>

</div>
</div>
<a id="ab2585bc0db8b90968cb84ada4e6042ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2585bc0db8b90968cb84ada4e6042ff">&#9670;&nbsp;</a></span>estimateEncodedBufferSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int icl::io::ImageCompressor::estimateEncodedBufferSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skipMetaData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>internal utlity function </p>

</div>
</div>
<a id="a568a5f162cc0263eb7796d85f07faa5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a568a5f162cc0263eb7796d85f07faa5a">&#9670;&nbsp;</a></span>estimateRawDataSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int icl::io::ImageCompressor::estimateRawDataSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skipMetaData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>internal utlity function </p>

</div>
</div>
<a id="a057e4f8a5262994edae663f7ccff6bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057e4f8a5262994edae663f7ccff6bf8">&#9670;&nbsp;</a></span>getCompression()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a> icl::io::ImageCompressor::getCompression </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>can be implemented for returning the current compression mode </p>

<p>Reimplemented in <a class="el" href="classicl_1_1io_1_1GenericImageOutput.html#a14685ee4bf2db7068854ead08a57e988">icl::io::GenericImageOutput</a>.</p>

</div>
</div>
<a id="af50cbec5921604a347033e60a8806800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af50cbec5921604a347033e60a8806800">&#9670;&nbsp;</a></span>pickTimeStamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classicl_1_1utils_1_1Time.html">utils::Time</a> icl::io::ImageCompressor::pickTimeStamp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> *&#160;</td>
          <td class="paramname"><em>compressedData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this can help to find out wheter the data is new and must be encoded </p>
<p>not supported for jpeg data </p>

</div>
</div>
<a id="a1151fe5ebd8cea891c17cf22afc2aba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1151fe5ebd8cea891c17cf22afc2aba1">&#9670;&nbsp;</a></span>setCompression()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void icl::io::ImageCompressor::setCompression </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html">CompressionSpec</a> &amp;&#160;</td>
          <td class="paramname"><em>spec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>string based interface for setting the compression mode </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spec</td><td>(e.g. <a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1CompressionSpec.html" title="compression specification">CompressionSpec</a>("mode") with mode = rle, jpg, or none) the compression quality, which might depend on the set type (e.g. 1 Bit for binary rle, or 90 for 90% jpeg compression) Current valid compression modes are<ul>
<li>"none" no compression (default, possible for all data types)</li>
<li>"rlen" run lenght encoding (quality can be 1, 4 or 6, it defines the number of bits, that are used for the value domain. Default value is 1, which is used for binary images)</li>
<li>"jpeg" jpeg encoding (quality is default jpeg quality 1% - 100%) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classicl_1_1io_1_1GenericImageOutput.html#a784f36121cbb9b861832d383d684fc29">icl::io::GenericImageOutput</a>.</p>

</div>
</div>
<a id="af6ab44152554eb8732165d664bdf8f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6ab44152554eb8732165d664bdf8f7d">&#9670;&nbsp;</a></span>uncompress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a>* icl::io::ImageCompressor::uncompress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> *&#160;</td>
          <td class="paramname"><em>compressedData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classicl_1_1core_1_1ImgBase.html">core::ImgBase</a> **&#160;</td>
          <td class="paramname"><em>dst</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>decodes the given byte segment </p>

</div>
</div>
<a id="aa591ff4c764f4d8ee9e9f682653916c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa591ff4c764f4d8ee9e9f682653916c0">&#9670;&nbsp;</a></span>uncompressHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structicl_1_1io_1_1ImageCompressor_1_1Header.html">Header</a> icl::io::ImageCompressor::uncompressHeader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> *&#160;</td>
          <td class="paramname"><em>compressedData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>only decodes an image header </p>
<p>not supported for jpeg data </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a780265d7f7ba201a4de25b22da56a0f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a780265d7f7ba201a4de25b22da56a0f2">&#9670;&nbsp;</a></span>m_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Data* icl::io::ImageCompressor::m_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pimpl type </p>
<p>pimpl pointer </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/icl/icl/ICLIO/src/ICLIO/<a class="el" href="ImageCompressor_8h_source.html">ImageCompressor.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 13 2021 15:28:22 for Image Component Library (ICL) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
