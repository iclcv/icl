
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Image In- and Output &#8212; ICL Manual</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GUI Creation and Visualization Framework" href="qt.html" />
    <link rel="prev" title="Unary- and Binary Image Filters" href="filter.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="qt.html" title="GUI Creation and Visualization Framework"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="filter.html" title="Unary- and Binary Image Filters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">ICL Manual</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../modules.html" accesskey="U">Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <script src="../js/jquery.tools.min.js"></script>

<div id="sticky">
  <table class="sticky-table">
  <tr><td><div class="sticky-entry "id="sticky-1"/><a class="sticky-link" href="../modules/utils.html">utils</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-2"/><a class="sticky-link" href="../modules/math.html">math</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-3"/><a class="sticky-link" href="../modules/core.html">core</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-4"/><a class="sticky-link" href="../modules/filter.html">filter</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-5"/><a class="sticky-link"href="../modules/io.html">io</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-6"/><a class="sticky-link"href="../modules/qt.html">qt</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-7"/><a class="sticky-link"href="../modules/cv.html">cv</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-8"/><a class="sticky-link"href="../modules/geom.html">geom</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-9"/><a class="sticky-link"href="../modules/markers.html">marker</a></td></tr>
  <tr><td><div class="sticky-entry "id="sticky-10"/><a class="sticky-link"href="../modules/physics.html">physics</a></td></tr>
  <!--tr><td><div class="sticky-entry "id="sticky-10"/><a class="sticky-link"href="../extras/tutorial.html">tutorial</a></td></tr-->
  </tr>
  </table>
</div>
<style type="text/css">
  .sticky-table{
     float: right;
  }

  a.sticky-link{
     color: inherit;
     font-size: 12px;
  }

  a.sticky-link:hover{
     text-decoration: none;
     color: inherit;
  }


  .sticky-entry{
     width: 12px;
     height: 12px;
     float: right;
     border-left: 1px solid rgb(200,200,200);
     border-top: 1px solid rgb(200,200,200);
     border-right: 1px solid rgb(100,100,100);
     border-bottom: 1px solid rgb(100,100,100);

     border-radius: 4px;
     box-shadow: 2px 2px 5px rgba(0,0,0,0.6);
     border: 1px solid blue;
     background-color: transparent; /* white; */
     color: transparent;
  }
  .sticky-entry:hover{
     width: 40px;
     color: rgb(100,100,100);
     background-color: white;
     padding-left: 2px;
     box-shadow: 5px 5px 10px rgba(0,0,0,0.6);
  }
  .sticky-entry:active{
     box-shadow: 0px 0px 0px transparent;
     border-left: 1px solid rgb(70,70,70);
     border-top: 1px solid rgb(70,70,70);
     border-right: 1px solid white;
     border-bottom: 1px solid white;
  }

  #sticky-1{ border: 1px solid rgb(255,0,255); }
  #sticky-2{ border: 1px solid rgb(255,0,0); }
  #sticky-3{ border: 1px solid rgb(255,128,0); }
  #sticky-4{ border: 1px solid rgb(255,255,0); }
  #sticky-5{ border: 1px solid rgb(168,255,0); }
  #sticky-6{ border: 1px solid rgb(0,200,255); }
  #sticky-7{ border: 1px solid rgb(0,255,0); }
  #sticky-8{ border: 1px solid rgb(0,50,255); }
  #sticky-9{ border: 1px solid rgb(0,0,255); }
  #sticky-10{ border: 1px solid rgb(128,0,255); }

  #sticky{
    line-height: 8px;
    margin-left:auto;
    position:absolute;
    right:0px;
    top:100px;
    padding:2px;
    padding-right:0px;
    padding-left:1px;
    position: fixed;
    background: transparent url(../_static/images/dash.png);
    width: 33px;
    height: 193px;
    top: 99px;
    padding-top: 12px;
  }

</style>

<script type="text/javascript">

$('#sticky-1').bind('click',function(e){ location = '../modules/utils.html';  });
$('#sticky-2').bind('click',function(e){ location = '../modules/math.html';  });
$('#sticky-3').bind('click',function(e){ location = '../modules/core.html';  });
$('#sticky-4').bind('click',function(e){ location = '../modules/filter.html';  });
$('#sticky-5').bind('click',function(e){ location = '../modules/io.html';  });
$('#sticky-6').bind('click',function(e){ location = '../modules/cv.html';  });
$('#sticky-7').bind('click',function(e){ location = '../modules/qt.html';  });
$('#sticky-8').bind('click',function(e){ location = '../modules/geom.html';  });
$('#sticky-9').bind('click',function(e){ location = '../modules/markers.html';  });
$('#sticky-10').bind('click',function(e){ location = '../modules/physics.html.html';  });

/* Script by: www.jtricks.com
 * Version: 20071127
 * Latest version:
 * www.jtricks.com/javascript/navigation/fixed_menu.html
 */
fixedMenuId = 'sticky';

var fixedMenu = {
    hasInner: typeof(window.innerWidth) == 'number',
    hasElement: document.documentElement != null
       && document.documentElement.clientWidth,

    menu: document.getElementById
        ? document.getElementById(fixedMenuId)
        : document.all
          ? document.all[fixedMenuId]
          : document.layers[fixedMenuId]
};

fixedMenu.computeShifts = function(){
    fixedMenu.shiftX = fixedMenu.hasInner
        ? pageXOffset
        : fixedMenu.hasElement
          ? document.documentElement.scrollLeft
          : document.body.scrollLeft;
    if (fixedMenu.targetLeft > 0){
        fixedMenu.shiftX += fixedMenu.targetLeft;
    }else{
        fixedMenu.shiftX +=
            (fixedMenu.hasElement
              ? document.documentElement.clientWidth
              : fixedMenu.hasInner
                ? window.innerWidth - 20
                : document.body.clientWidth)
            - fixedMenu.targetRight
            - fixedMenu.menu.offsetWidth;
    }

    fixedMenu.shiftY = fixedMenu.hasInner
        ? pageYOffset
        : fixedMenu.hasElement
          ? document.documentElement.scrollTop
          : document.body.scrollTop;
    if (fixedMenu.targetTop > 0){
        fixedMenu.shiftY += fixedMenu.targetTop;
    }else{
        fixedMenu.shiftY +=
            (fixedMenu.hasElement
            ? document.documentElement.clientHeight
            : fixedMenu.hasInner
              ? window.innerHeight - 20
              : document.body.clientHeight)
            - fixedMenu.targetBottom
            - fixedMenu.menu.offsetHeight;
    }
};

fixedMenu.moveMenu = function(){
    fixedMenu.computeShifts();

    if (fixedMenu.currentX != fixedMenu.shiftX
        || fixedMenu.currentY != fixedMenu.shiftY){
        fixedMenu.currentX = fixedMenu.shiftX;
        fixedMenu.currentY = fixedMenu.shiftY;

        if (document.layers){
            fixedMenu.menu.left = fixedMenu.currentX;
            fixedMenu.menu.top = fixedMenu.currentY;
        }else{
            fixedMenu.menu.style.left = fixedMenu.currentX + 'px';
            fixedMenu.menu.style.top = fixedMenu.currentY + 'px';
        }
    }

    fixedMenu.menu.style.right = '';
    fixedMenu.menu.style.bottom = '';
};

fixedMenu.floatMenu = function(){
    fixedMenu.moveMenu();
    setTimeout('fixedMenu.floatMenu()', 20);
};

// addEvent designed by Aaron Moore
fixedMenu.addEvent = function(element, listener, handler){
    if(typeof element[listener] != 'function' ||
       typeof element[listener + '_num'] == 'undefined'){
        element[listener + '_num'] = 0;
        if (typeof element[listener] == 'function'){
            element[listener + 0] = element[listener];
            element[listener + '_num']++;
        }
        element[listener] = function(e){
            var r = true;
            e = (e) ? e : window.event;
            for(var i = 0; i < element[listener + '_num']; i++)
                if(element[listener + i](e) === false)
                    r = false;
            return r;
        }
    }

    //if handler is not already stored, assign it
    for(var i = 0; i < element[listener + '_num']; i++)
        if(element[listener + i] == handler)
            return;
    element[listener + element[listener + '_num']] = handler;
    element[listener + '_num']++;
};

fixedMenu.supportsFixed = function(){
    var testDiv = document.createElement("div");
    testDiv.id = "testingPositionFixed";
    testDiv.style.position = "fixed";
    testDiv.style.top = "0px";
    testDiv.style.right = "0px";
    document.body.appendChild(testDiv);
    var offset = 1;
    if (typeof testDiv.offsetTop == "number"
        && testDiv.offsetTop != null
        && testDiv.offsetTop != "undefined")
    {
        offset = parseInt(testDiv.offsetTop);
    }
    if (offset == 0)
    {
        return true;
    }

    return false;
};

fixedMenu.init = function(){
    if (fixedMenu.supportsFixed())
        fixedMenu.menu.style.position = "fixed";
    else
    {
        var ob =
            document.layers
            ? fixedMenu.menu
            : fixedMenu.menu.style;

        fixedMenu.targetLeft = parseInt(ob.left);
        fixedMenu.targetTop = parseInt(ob.top);
        fixedMenu.targetRight = parseInt(ob.right);
        fixedMenu.targetBottom = parseInt(ob.bottom);

        if (document.layers)
        {
            menu.left = 0;
            menu.top = 0;
        }
        fixedMenu.addEvent(window, 'onscroll', fixedMenu.moveMenu);
        fixedMenu.floatMenu();
    }
};

fixedMenu.addEvent(window, 'onload', fixedMenu.init);

jQuery(document).ready(function() {

  console.log('executing java-script-based document upgrade');

  $('.reference.external').after(function() {

    this.href = this.href.replace('doc/icl-manual/doc/icl-api/','doc/icl-api/');

    var href = this.href;
    var text = this.text;

    var package = 'unknown';
    var type = 'other';

    if( this.text.match('^ICL.*\.h$') ){ // we have a header file
       var m = this.text.match('ICL(\[^/\]*)/.*');
       if( m ){
          package = m[1].toLowerCase();
          type = "header";
       }
    }else if(this.text.match('.*\.h$')){
       package  = 'unknown';
       type = "header";
    }


    var packages = [ 'utils', 'math', 'core', 'filter', 'io', 'qt', 'cv', 'geom', 'markers', 'physics' ];
    var groupLUT = [ ['TIME', 'EXCEPT', 'THREAD', 'RANDOM', 'UTILS' , 'PA', 'XML', 'STRUTILS', 'FUNCTION', 'BASIC__TYPES'],
                     ['LINALG'],
                     ['TYPES', 'GENERAL', 'IMAGE'],
                     ['UNARY', 'BINARY', 'AFFINE', 'NBH', 'INPLACE' ],
                     ['DC_G', 'UTILS_G', 'FILEIO_G', 'MOVIE_FILE_G', 'V4L_G', 'GIGE_G'],
                     ['COMMON', 'HANDLES', 'UNCOMMON'],
                     ['G_RD'],
                     [],
                     ['PLUGINS']
                   ];

    if(package == 'unknown'){
      for(var i=0;i<10;++i){
        if( href.match('.*/namespaceicl_1_1'+packages[i]+'\.html') ){
          package = packages[i];
          // could be a function or a namespace
          if(this.text.match('.*'+packages[i]+'$')){
             type = 'namespace';
          }else if(this.text[0] > 'A' && this.text[0] < 'Z'){
             type = 'global type';
          }else{
             type = 'global function';
          }
          break;
        }
        if( href.match('.*icl_1_1'+packages[i]+'.*') ){
          package = packages[i];
          break;
        }
      }
    }
    if(package == 'unknown'){
      var res = href.match('.*group__(\[^.\]*).*')
      if( res ){
         var groupName = res[1];
         for(var i=0;i<9;++i){
            if(groupLUT[i].indexOf(groupName) != -1){
                package = packages[i];
                break;
            }
         }
         var res2 = this.text.match('.*::(\[^:\]*)$');
         var t = "???";
         if(res2){
            t = res2[1];
         }else{
            t = this.text;
         }
         if(t[0] > 'A' && t[0] < 'Z'){
            type = "grouped type";
         }else{
            if(groupName == "TYPES"){
              type = "core type";
            }else if(groupName == "BASIC__TYPES"){
              type = "basic type";
            }else{
              type = "grouped func.";
            }
         }
       }
    }

    if(href.match('.*classicl.*')){
       if(href.match('.*#\[0-9a-f\]*')){
         type = 'class: method';
       }else{
         type = 'class';
       }
    }else if(href.match('.*structicl.*')){
       if(href.match('.*#\[0-9a-f\]*')){
         type = 'struct: method';
       }else{
         type = 'struct';
       }
    }
    if(package == "unknown" && href.match('.*namespaceicl.*')){
      // very special treatment
      return '<div class="tooltip">the <b>icl</b> namespace is used for all '
            +'modules.</div>';

    }else if(package != "unknown"){
      return '<div class="tooltip">'
         + '<a href="../modules/'+package+'.html">'
         + '<img title="manual: '+package+' module" width="110px" src="../_images/'+package+'1.png"></img>'
         + '</a>'
         + '<br/>' + 'Type:   <b>' + type + '</b>'
         + '</div>';
    }else{
      return '<div class="tooltip">'
         + 'Unable to locate package'
         + '<br/>' + 'Type:   <b>' + type + '</b>'
         + '</div>';
    }

    //return '<div class="tooltip">' + 'TEST TEST TEST' + '</div>';
  });

  $('.reference.external').tooltip({
    position: "top center",
    opacity: 0.95,
    effect: 'fade',
    offset: [7,33]
  });

});
</script>
<style type="text/css">

  .tooltip {
    display:none;
    background: transparent url(../_static/images/tooltip.png);
    font-size:13px;
    height:80px;
    width:131px;
    padding:10px;
    color: #555;
    line-height: 20px;
  }
  a.reference.external {
    color: rgb(20,60,100);
    padding: 2px;
    padding-left: 6px;
    padding-right: 5px;
  }
  a.reference.external:hover {
    color: rgb(20,60,100);
    border: 1px solid rgba(0,0,0,0.3);
    border-radius: 5px;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    padding: 2px;
    padding-left: 5px;
    padding-right: 4px;
    text-decoration: none;
  }

 div.body{
    border-top-left-radius: 15px;
    border-bottom-left-radius: 15px;
    border: 1px solid rgb(110,110,110);
    box-shadow: 0px 0px 50px rgba(0,0,0,0.7);
  }

  div.body h1{
    border-top-left-radius: 15px;
    box-shadow: 0px 2px 0px rgba(0,0,0,0.4);
  }


  div.body h1, div.body h2, div.body h3, div.body h4{
    margin-bottom: -8px;
    background-repeat: no-repeat;
    margin-left: -41px;
    box-shadow: none;
    border: none;
    opacity: 1;
    color: rgb(230,230,230);
    height: 44px;
    padding-top: 4px;
  }

  div.body h1{
    padding-top: 7px;
    background: transparent url(../_static/images/h1.png);
    margin-top: 8px;
    border-radius: 0px;
    height: 57px;
    padding-top: 3px;
  }

  div.body h2{
    padding-top: 7px;
    background: transparent url(../_static/images/h2.png);
    height: 52px;
  }

  div.body h3{
    background: transparent url(../_static/images/h3.png);
  }

  div.body h4{
    padding-top: 5px;
    height: 42px;
    background: transparent url(../_static/images/h4.png);
    color: rgb(60,60,60);
  }

  div.sphinxsidebar{
    font-size: 80%;
  }

  table.docutils td, table.docutils th{
    border: 0px;
  }
  th {
     background-color: #0F67A1;
     color: rgb(220,220,220);
  }

  img[alt="shadow"]{
     box-shadow: 5px 5px 12px rgba(0,0,0,0.3);
  }

  a.headerlink {
     color: rgb(230,230,230);
  }
  a.headerlink:hover{
     color: white;
     background: transparent;
  }

  h4:hover > a.headerlink {
     color: rgb(60,60,60);
  }
  h4 > a.headerlink {
     color: rgb(90,90,90);
  }
  div.related ul{
     background: rgba(60, 60, 60, 0);
     background-image: url(../_static/images/stripes3.png);
     background-position-x: 2px;
  }
  div.documentwrapper, div.footer {
     background-image: url(../_static/images/stripes1.png);
  }

  img.logo{
     background-color: white;
     border-radius: 8px;
     border: 1px solid #A0A0A0;
     box-shadow: 5px 5px 20px rgba(0,0,0,0.4);
     padding: 8px;
  }

  div.sphinxsidebar #searchbox input[type="text"] {
     width: 160px;
  }

</style><div class="section" id="image-in-and-output">
<span id="io"></span><h1>Image In- and Output<a class="headerlink" href="#image-in-and-output" title="Permalink to this headline">¶</a></h1>
<img alt="../_images/io1.png" src="../_images/io1.png" />
<p>The ICLIO module contains functions and classes that support image in-
and output. The package contains a large set of classes, that are
actually not interesting for users. Therefore, only the relevant
classes will be mentioned here. In particular, the IO module contains
almost 40 implementations for the <a class="reference external" href="../icl-api/classicl_1_1io_1_1Grabber.html">io::Grabber</a> interface, but since
only the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a> is to be used, all other classes are
not discussed.</p>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#io-generic-grabber"><span class="std std-ref">The Generic Grabber</span></a><ul>
<li><a class="reference internal" href="#io-grabbers-device-selection"><span class="std std-ref">Device Selection from Command Line</span></a></li>
<li><a class="reference internal" href="#io-grabbers-properties"><span class="std std-ref">Adapting Camera Properties from Command Line</span></a></li>
<li><a class="reference internal" href="#io-grabbers-remote-properties"><span class="std std-ref">Adapting Camera Properties Remotely</span></a></li>
<li><a class="reference internal" href="#io-grabber-backends"><span class="std std-ref">List of Supported Grabber Backends</span></a></li>
<li><a class="reference internal" href="#io-file-types"><span class="std std-ref">Supported Image File Types</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#io-generic-image-output"><span class="std std-ref">The Generic Image Output</span></a><ul>
<li><a class="reference internal" href="#io-grabbers-output-device-selection"><span class="std std-ref">Output Selection from Command Line</span></a></li>
<li><a class="reference internal" href="#io-output-backends"><span class="std std-ref">List of Supported Output Backends</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#io-color-format-decoder"><span class="std std-ref">The ColorFormatDecoder</span></a></li>
<li><a class="reference internal" href="#io-intrinsic-calibrator"><span class="std std-ref">Intrinsic Camera Calibration</span></a></li>
<li><a class="reference internal" href="#io-others"><span class="std std-ref">Other Classes</span></a></li>
</ul>
</div>
<div class="section" id="the-generic-grabber">
<span id="io-generic-grabber"></span><h2>The Generic Grabber<a class="headerlink" href="#the-generic-grabber" title="Permalink to this headline">¶</a></h2>
<p>Even though, a large set of Grabber implementations is available, we
strongly recommend to use instances of the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a>
only. The <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">GenericGrabber</a> wraps all other supported Grabber
implementations internally. At construction time, the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">GenericGrabber</a> is set up with a pair of string parameters
(usually specified on the application’s command line) that select
which device has to use internally. By these means, you can simply
write applications that are able to acquire images from all available
image sources without having to check possibly supported back-ends
manually. Furthermore, your application will also benefit from
ICL-updates, which provide further grabber-implementations
automatically, and the string-based device selection mechanism does
also provide an elegant way to set grabber-properties from the
command-line.  Here is a small example for a dynamic-source grab
example</p>
<table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;ICLQt/Common.h&gt;</span><span class="cp"></span>

<span class="n">GUI</span> <span class="n">gui</span><span class="p">;</span>
<span class="n">GenericGrabber</span> <span class="n">grabber</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">init</span><span class="p">(){</span>
   <span class="n">grabber</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">pa</span><span class="p">(</span><span class="s">&quot;-i&quot;</span><span class="p">));</span>
   <span class="n">gui</span> <span class="o">&lt;&lt;</span> <span class="n">Image</span><span class="p">().</span><span class="n">handle</span><span class="p">(</span><span class="s">&quot;image&quot;</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">Show</span><span class="p">();</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">run</span><span class="p">(){</span>
   <span class="n">gui</span><span class="p">[</span><span class="s">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grabber</span><span class="p">.</span><span class="n">grab</span><span class="p">();</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">args</span><span class="p">){</span>
   <span class="k">return</span> <span class="n">ICLApp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">args</span><span class="p">,</span><span class="s">&quot;-input|-i(2)&quot;</span><span class="p">,</span><span class="n">init</span><span class="p">,</span><span class="n">run</span><span class="p">).</span><span class="n">exec</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</td>
<td><img alt="shadow" class="first last" src="../_images/generic-grabber.png" />
</td>
</tr>
</tbody>
</table>
<div class="section" id="device-selection-from-command-line">
<span id="io-grabbers-device-selection"></span><h3>Device Selection from Command Line<a class="headerlink" href="#device-selection-from-command-line" title="Permalink to this headline">¶</a></h3>
<p>A minimally adapted version of this application is available as an
example application called ‘icl-viewer’. The program argument -input
expects two sub-arguments, the <em>backend-selector</em> and the <em>device
selector</em> In following examples you will see synergy of ICL’s program
argument evaluation toolbox and the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a></p>
<ul>
<li><p class="first">grab from the first fire-wire device available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p class="first">grab from a file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">file</span> <span class="n">my</span><span class="o">-</span><span class="n">image</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
</li>
<li><p class="first">grab from a list of files (note, the pattern has be be set in single tics):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">file</span> <span class="s1">&#39;images/*.jpg&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">create the famous ‘lena’ demo image (also possible: ‘parrot’, ‘cameraman’ and others):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">create</span> <span class="n">lena</span>
</pre></div>
</div>
</li>
<li><p class="first">create an animated demo image (a moving red square):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">demo</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p class="first">grab from a standad webcam using opencv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">cvcam</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p class="first">grab from a pylon compatible GigE device:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">pylon</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="adapting-camera-properties-from-command-line">
<span id="io-grabbers-properties"></span><h3>Adapting Camera Properties from Command Line<a class="headerlink" href="#adapting-camera-properties-from-command-line" title="Permalink to this headline">¶</a></h3>
<p>In addition to the simple device selection, also camera device
properties can be set from command line. For this, a list of
<em>&#64;property=value</em> tokens is simply appended to the <em>device-selector</em></p>
<ul>
<li><p class="first">force VGA size (this must be supported by the device):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span><span class="nd">@size</span><span class="o">=</span><span class="n">VGA</span>
</pre></div>
</div>
</li>
<li><p class="first">list all possible properties and their allowed values and ranges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span><span class="nd">@info</span>
</pre></div>
</div>
</li>
<li><p class="first">instantiate a grabber and directly load a property configuration
file (note: these files can be created interactively with the
camera-configuration tool <strong>icl-camera-config</strong> or by reading a devices
properties using e.g. <strong>icl-camera-param-io -d dc 0 -o my-file.xml</strong>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span><span class="nd">@load</span><span class="o">=</span><span class="n">my</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</li>
<li><p class="first">set several options at once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">kinectc</span> <span class="s1">&#39;0@LED=green@format=IR Image (10Bit)&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">enable image undistortion according to undistortion parameters
stored in an appropriate xml file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">camviewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span><span class="o">=</span><span class="n">my</span><span class="o">-</span><span class="n">udist</span><span class="o">-</span><span class="n">properties</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</li>
<li><p class="first">create a remote server for the camera properties so that an external application
that receives the images can also adapt the grabber properties (only with RSB-Support):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="n">i</span> <span class="n">v4l</span> <span class="mi">0</span><span class="nd">@remote</span><span class="o">-</span><span class="n">server</span><span class="o">=/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="o">/</span><span class="n">cfg</span> <span class="o">-</span><span class="n">o</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
</pre></div>
</div>
<p>The opposite receiving part then can instantiate a remote client:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="n">i</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="nd">@remote</span><span class="o">-</span><span class="n">client</span><span class="o">=/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="o">/</span><span class="n">cfg</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>appropriate</em> means that the xml-file was created by either serializing
an <a class="reference external" href="../icl-api/classicl_1_1io_1_1ImageUndistortion.html">io::ImageUndistortion</a> structure to a file, or by using ICL’s tool for
the estimation of lens distortion compensation parameters: <strong>icl-opencv-calib</strong>.
The use of this tool is explained in detail in <a class="reference internal" href="../howtos/camera-calibration.html#howtos-calib-distortion"><span class="std std-ref">Image Undistortion (Lens distortion correction)</span></a></p>
</div>
</li>
</ul>
</div>
<div class="section" id="adapting-camera-properties-remotely">
<span id="io-grabbers-remote-properties"></span><h3>Adapting Camera Properties Remotely<a class="headerlink" href="#adapting-camera-properties-remotely" title="Permalink to this headline">¶</a></h3>
<p>When streaming images between processes, a particular difficulty is
the adaption of native camera parameters from the receiving (auctually
processing) process. Let’s say, an image server process is created in
one process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="n">i</span> <span class="n">v4l</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
</pre></div>
</div>
<p>that here streams images from the first v4l device through an rsb-informer.
Now an actuall application, that receives (and processes) the images, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="n">i</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
</pre></div>
</div>
<p>would only be able to adapt the here locally used RSB-grabber’s
properties, which basically only allow to adjust image compression
parameters. This mechanism is internally realized by a property
feedback channel that is automatically spawned by the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html">io::GenericImageOutput</a> instance, which is created in the
icl-pipe process. Though this channel, the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a>
that is created in the icl-viewer process can tell the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html">io::GenericImageOutput</a> of the icl-pipe-process how and how much
the images should be compressed. The actuall video-4-linux camera
properties, however, are only visible in the icl-pipe process.</p>
<p>ICL’s <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a> provides a generic method to forward the
actual device properties also to the client (icl-viewer) side. To this end,
the sending process must be explicitly told to create an RSB-remote-server
for its grabbers properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="n">i</span> <span class="n">v4l</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="nd">@remote</span><span class="o">-</span><span class="n">server</span><span class="o">=/</span><span class="n">baz</span>
</pre></div>
</div>
<p>Now, client processes, such as icl-viewer, can access these properties
(if needed) by instantiating a remote-client:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="n">i</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="nd">@remote</span><span class="o">-</span><span class="n">client</span><span class="o">=/</span><span class="n">baz</span>
</pre></div>
</div>
<p>In this case, the RSB-grabber in the icl-viewer process would not only
provide access to the native RSB-grabber properties, but also to all
properties of the v4l-Grabber that is used in the icl-pipe process. Please note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">remotely</span> <span class="n">connected</span> <span class="n">properties</span> <span class="n">are</span> <span class="n">endowed</span> <span class="k">with</span> <span class="n">a</span> <span class="s2">&quot;remote.&quot;</span><span class="o">-</span><span class="n">prefix</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="list-of-supported-grabber-backends">
<span id="io-grabber-backends"></span><h3>List of Supported Grabber Backends<a class="headerlink" href="#list-of-supported-grabber-backends" title="Permalink to this headline">¶</a></h3>
<p>Each ICL-application that is implemented using a combination of program
argument and the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">GenericGrabber</a>, is able to provide a list of
all currently supported backends and how to understand their specific
<em>device-selector</em>. Simple write e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="nb">list</span> <span class="nb">all</span>
</pre></div>
</div>
<p>A full list would currently contain the following, the library
dependencies are not part of automatically created list.</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="6%" />
<col width="28%" />
<col width="40%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">index</th>
<th class="head">ID</th>
<th class="head">parameter</th>
<th class="head">description</th>
<th class="head">library dependency</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>kinectd</td>
<td>device ID</td>
<td>kinect depth camera source</td>
<td>libfreenect</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>kinectc</td>
<td>device ID</td>
<td>kinect color camera source</td>
<td>libfreenect</td>
</tr>
<tr class="row-even"><td>2</td>
<td>kinecti</td>
<td>devide ID</td>
<td>kinect IR camera source</td>
<td>libfreenect</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>v4l</td>
<td>/dev/videoX index or device-file</td>
<td>V4l2 based camera source</td>
<td>videodev-headers or libv4l</td>
</tr>
<tr class="row-even"><td>4</td>
<td>dc</td>
<td>camera ID or unique ID</td>
<td>IEEE-1394a based camera source (FireWire 400)</td>
<td>libdc1394</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>dc800</td>
<td>camera ID or unique ID</td>
<td>IEEE-1394b based camera source (FireWire 800)</td>
<td>libdc1394</td>
</tr>
<tr class="row-even"><td>6</td>
<td>sr</td>
<td>device Index or -1 for auto select</td>
<td>Mesa Imaging SwissRanger depth camera source</td>
<td>libmesasr</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>xine</td>
<td>video filename</td>
<td>Xine library based video file source</td>
<td>libxine</td>
</tr>
<tr class="row-even"><td>8</td>
<td>cvvideo</td>
<td>video filename</td>
<td>OpenCV based video file source</td>
<td>OpenCV &gt;= 2.3</td>
</tr>
<tr class="row-odd"><td>9</td>
<td>cvcam</td>
<td>camera ID</td>
<td>OpenCV based camera source</td>
<td>OpenCV &gt;= 2.3</td>
</tr>
<tr class="row-even"><td>10</td>
<td>sm</td>
<td>shared memory segment name</td>
<td>Qt-based shared memory source</td>
<td>Qt</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>pylon</td>
<td>camera ID ?? or IP-address</td>
<td>Basler Pylon based gigabit-ethernet (GIG-E) camera source</td>
<td>Basler Pylon and Genicam libs</td>
</tr>
<tr class="row-even"><td>12</td>
<td>rsb</td>
<td>[comma sep. transport list=spread]:scope</td>
<td>Robotics Service Bus based image source</td>
<td>librsbcore librsc</td>
</tr>
<tr class="row-odd"><td>13</td>
<td>file</td>
<td>file name or file-pattern (in ‘’)</td>
<td>image source for single or a list of image files</td>
<td>imagemagic, libpng, libjpeg</td>
</tr>
<tr class="row-even"><td>14</td>
<td>demo</td>
<td>0</td>
<td>demo image source</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>create</td>
<td>parrot|lena|cameraman|mandril</td>
<td>everywhere available test images source</td>
<td>libjpeg</td>
</tr>
<tr class="row-even"><td>16</td>
<td>oni</td>
<td>depth|rgb|ir</td>
<td>OpenNI-based depth camera grabber for Kinect and X-tion</td>
<td>OpenNI</td>
</tr>
<tr class="row-odd"><td>17</td>
<td>optris</td>
<td>camera serial</td>
<td>libIRImager based backend for Optris’ IR Cameras</td>
<td>libirimager, v4l2, udev</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="supported-image-file-types">
<span id="io-file-types"></span><h3>Supported Image File Types<a class="headerlink" href="#supported-image-file-types" title="Permalink to this headline">¶</a></h3>
<p>ICL supports a huge variety of image file types. Some of them are
supported natively, i.e. no extra library is necessary. Most of the
formats do not support to load and save image meta data and
icl-specific image features such as the region of interest.</p>
<p><strong>Natively supported Image Types</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>ppm, pgm and pnm</strong> are supported as a common, simple and
uncompressed image format</li>
<li><strong>csv</strong> comma separated value files can also be read natively</li>
<li><strong>icl</strong> a first <strong>pnm</strong>-like data format</li>
<li><strong>bicl</strong> and <strong>jicl</strong> the <em>new</em> common icl-specific data types,
which supports all image properties, including image meta-data.  The
<strong>jicl</strong> format is uses jpeg-compression internally, while <strong>bicl</strong>
stored the image data in a binary manner, but uncompressed</li>
<li><strong>rle1</strong>, <strong>rle4</strong>, <strong>rle6</strong>, and <strong>rle8</strong> is also an icl-specific
format that is in particular well suited for binary images. The
formats use run length encoding, where for each format, a certain
number of bits is used for encoding a pixel value. I.e. <strong>rle1</strong>
uses 1 bit for the pixel value, and is therefore only able to
represent binary images. However in case of binary images, the
maximum run length is defined by the remaining 7 bits (128), which
usually leads to a very high loss-less compression ratio.  The
<strong>rle4</strong> format is able to represent 16 different gray-values,
however its theoretical maximum compression is much less, and this
effect is even stronger for <strong>rle6</strong>, which can distinguish up to
64 gray values, which is usually enough for visualization.  The
<strong>rle8</strong> format works slightly differently, because it uses two
bytes – 16bits – for each run-token. Therefore, it is loss-less
for common <a class="reference external" href="../icl-api/group__TYPES.html#gab9ebfd5e35116d194189c8f233607414">Img8u</a> source images, but still providing a
maximum run length of 256, which leads to a very high compression
for homogeneous binary image regions. The <strong>rle</strong>-type also
support loading and saving of all other image properties,
including meta-data.</li>
</ul>
</div></blockquote>
<p><strong>Image Files that need External Libraries</strong></p>
<blockquote>
<div><ul>
<li><p class="first"><strong>.gz</strong> for each natively supported file suffix also a suffix.gz-
version is supported, which simply writes the files with zlib.
Even though, this is rather slow, it can sometimes provide good
loss-less image compression</p>
</li>
<li><p class="first"><strong>jpeg</strong> is supported if ICL has libjpeg or image-magick support, or</p>
</li>
<li><p class="first"><strong>png</strong> is supported if ICL has png or image-magick support</p>
</li>
<li><p class="first">if image-magick is supported, also all file-types are supported,
that can be tacked by image magick. A list of file types supported
by image magick can be obtained from command line using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identify</span> <span class="o">-</span><span class="nb">list</span> <span class="nb">format</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="the-generic-image-output">
<span id="io-generic-image-output"></span><h2>The Generic Image Output<a class="headerlink" href="#the-generic-image-output" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html">io::GenericImageOutput</a> works very similar to the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a>, however in an opposite direction. It has a
single method called <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html#a645b05e417034040f35b8073f0fe5e1a">GenericImageOutput::send</a>:</p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;ICLQt/Common.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;ICLIO/GenericImageOutput.h&gt;</span><span class="cp"></span>

<span class="n">GUI</span> <span class="n">gui</span><span class="p">;</span>
<span class="n">GenericGrabber</span> <span class="n">grabber</span><span class="p">;</span>
<span class="n">GenericImageOutput</span> <span class="n">out</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">init</span><span class="p">(){</span>
   <span class="n">grabber</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">pa</span><span class="p">(</span><span class="s">&quot;-i&quot;</span><span class="p">));</span>
   <span class="n">out</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">pa</span><span class="p">(</span><span class="s">&quot;-o&quot;</span><span class="p">));</span>
   <span class="n">gui</span> <span class="o">&lt;&lt;</span> <span class="n">Image</span><span class="p">().</span><span class="n">handle</span><span class="p">(</span><span class="s">&quot;image&quot;</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">Show</span><span class="p">();</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">run</span><span class="p">(){</span>
  <span class="k">const</span> <span class="n">ImgBase</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="n">grabber</span><span class="p">.</span><span class="n">grab</span><span class="p">();</span>
  <span class="n">gui</span><span class="p">[</span><span class="s">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span><span class="p">;</span>
  <span class="n">out</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">args</span><span class="p">){</span>
  <span class="k">return</span> <span class="n">ICLApp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">args</span><span class="p">,</span><span class="s">&quot;-input|-i(2) -output|-o(2)&quot;</span><span class="p">,</span><span class="n">init</span><span class="p">,</span><span class="n">run</span><span class="p">).</span><span class="n">exec</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="output-selection-from-command-line">
<span id="io-grabbers-output-device-selection"></span><h3>Output Selection from Command Line<a class="headerlink" href="#output-selection-from-command-line" title="Permalink to this headline">¶</a></h3>
<p>Since almost all ICL-applications use the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">io::GenericGrabber</a> in
combination with ICL’s programm argument evaluation toolbox, nearly
all ICL applications can be set up to grab their source images from an
arbitrary image source. In this context, the application
<strong>icl-pipe</strong> might be very useful: <strong>icl-pipe</strong> does not only have a generic
image souce, but is does also uses the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html">io::GenericImageOutput</a> to
stream the grabbed images <em>somewhere else</em>. Here are some examples:</p>
<ul>
<li><p class="first">grab images from dc camera and dump the results into files (#### is
replaced by the image index, here 0000, 0001, …  for more ore less
trailing zeros, just add more or less hashes #):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="n">file</span> <span class="n">images</span><span class="o">/</span><span class="n">image</span><span class="o">-</span><span class="c1">####.ppm</span>
</pre></div>
</div>
</li>
<li><p class="first">grab images and pipe them to a shared memory segment which can
directly be accessed by other ICL applications:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="n">sm</span> <span class="n">my</span><span class="o">-</span><span class="n">segment</span>
</pre></div>
</div>
</li>
<li><p class="first">now, the images can be read online from the shared memory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">viewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">sm</span> <span class="n">my</span><span class="o">-</span><span class="n">segment</span>
</pre></div>
</div>
</li>
<li><p class="first">capture a video using an opencv based video writer (here, with DIVX
codec, VGA-resolution and playback speed of 24 frames per second
(note, not all combinations of codecs, resolutions and sizes are
possible, actually, most are not :-):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="nb">input</span> <span class="n">dc</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="n">video</span> <span class="n">my</span><span class="o">-</span><span class="n">video</span><span class="o">.</span><span class="n">avi</span><span class="p">,</span><span class="n">DIVX</span><span class="p">,</span><span class="n">VGA</span><span class="p">,</span><span class="mi">24</span>
</pre></div>
</div>
</li>
<li><p class="first">re-encode a video using a xine-based grabber:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="nb">input</span> <span class="n">video</span> <span class="n">some</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">mpg</span> <span class="o">-</span><span class="n">o</span> <span class="n">some</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">converted</span><span class="p">,</span><span class="n">DIVX</span><span class="p">,</span><span class="n">SVGA</span><span class="p">,</span><span class="mi">30</span>
</pre></div>
</div>
</li>
<li><p class="first">grab images from a robotics service bus scope /foo/bar (using
spread-based multicast connection):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">camviewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">rsb</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
</pre></div>
</div>
</li>
<li><p class="first">grab images from a robotics service bus scope /foo/bar
(using socket connection):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">camviewer</span> <span class="o">-</span><span class="nb">input</span> <span class="n">rsb</span> <span class="n">socket</span><span class="p">:</span><span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
</pre></div>
</div>
</li>
<li><p class="first">grab video file and use a robotics service bus informer to
publish the image via spread and socket simultaneously:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="nb">input</span> <span class="n">cvvideo</span> <span class="n">myfile</span><span class="o">.</span><span class="n">avi</span> <span class="o">-</span><span class="n">o</span> <span class="n">rsb</span> <span class="n">spread</span><span class="p">,</span><span class="n">socket</span><span class="p">:</span><span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="list-of-supported-output-backends">
<span id="io-output-backends"></span><h3>List of Supported Output Backends<a class="headerlink" href="#list-of-supported-output-backends" title="Permalink to this headline">¶</a></h3>
<p>Just like the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">GenericGrabber</a> also the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html">GenericImageOutput</a>
can be used to query a list of supported backends from the command
line. Of course, we need an application, that uses the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericImageOutput.html">GenericImageOutput</a> in combination with ICL’s program argument
evaluation environtment, such as <strong>icl-pipe</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icl</span><span class="o">-</span><span class="n">pipe</span> <span class="o">-</span><span class="n">i</span> <span class="n">demo</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="nb">list</span> <span class="nb">all</span>
</pre></div>
</div>
<p>A complete list looks like this, and again, we added a column for the
library dependency:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="7%" />
<col width="28%" />
<col width="31%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">nr</th>
<th class="head">id</th>
<th class="head">parameters</th>
<th class="head">explanation</th>
<th class="head">library dependency</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>video</td>
<td>video filename</td>
<td>OpenCV based video file writer</td>
<td>OpenCV &gt;= 2.3</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>sm</td>
<td>shared memory segment ID</td>
<td>Qt based shared memory writer</td>
<td>Qt</td>
</tr>
<tr class="row-even"><td>2</td>
<td>rsb</td>
<td>[transports=spread]:scope</td>
<td>Network output stream</td>
<td>librsbcore, librsc</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>file</td>
<td>file pattern in tics ‘’</td>
<td>File Writer</td>
<td>optionally, libjpeg, …</td>
</tr>
<tr class="row-even"><td>4</td>
<td>v4l</td>
<td>device name or id</td>
<td>V4L2 looback device writer</td>
<td>videodev-headers or libv4l</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="the-colorformatdecoder">
<span id="io-color-format-decoder"></span><h2>The ColorFormatDecoder<a class="headerlink" href="#the-colorformatdecoder" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="../icl-api/classicl_1_1io_1_1ColorFormatDecoder.html">io::ColorFormatDecoder</a> is closely connected to the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1FourCC.html">io::FourCC</a> utility class. Its <a class="reference external" href="../icl-api/classicl_1_1io_1_1ColorFormatDecoder.html#a599a49681337ebb7656d44900e8c2185">ColorFormatDecoder::decode</a>
function is able to decode commonly encoded images. Here, the data is
represented by a single data pointer (in shape of a <strong>const</strong>
<a class="reference external" href="../icl-api/namespaceicl.html#a03c5fb8fe5763e6a400b4651b0eec2d7">icl8u</a> <strong>*</strong>), and the color format is specified by an also
passed <a class="reference external" href="../icl-api/classicl_1_1io_1_1FourCC.html">FourCC</a> instance.  Currently, the following FourCC codes
are supported</p>
<p><strong>GRAY</strong>, <strong>GREY</strong> and <strong>Y800</strong></p>
<blockquote>
<div>are all the same simple row-major byte gray scale images</div></blockquote>
<p><strong>YUYV</strong>, <strong>Y444</strong>, <strong>YU12</strong></p>
<blockquote>
<div>YUV sub-formats</div></blockquote>
<p><strong>MJPE</strong></p>
<blockquote>
<div>Motion jpeg</div></blockquote>
<p><strong>MYRM</strong></p>
<blockquote>
<div>Customly defined fourcc value for the Myrmex tactile device
designed by Carsten Schürmann</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whenever a new V4L2 camera provides an unrecognized color format,
support for this format must be added to the
<a class="reference external" href="../icl-api/classicl_1_1io_1_1ColorFormatDecoder.html">ColorFormatDecoder</a></p>
</div>
</div>
<div class="section" id="intrinsic-camera-calibration">
<span id="io-intrinsic-calibrator"></span><h2>Intrinsic Camera Calibration<a class="headerlink" href="#intrinsic-camera-calibration" title="Permalink to this headline">¶</a></h2>
<p>Intrinsic camera calibration basically consists of two parts:</p>
<ul class="simple">
<li>Estimation of paramerters for removing lens-distortion artifacts</li>
<li>Estimation of projective camera prameters (focal-length,
principal-point offset and skew)</li>
</ul>
<p>ICL assumes that these two steps are conceptually separated. We solve
and apply lens-undistortion <strong>before</strong> all further processing
steps. Thus, the more or less distorted camera image is used to
compute lens-undistortion parameters using the very common 5 parameter
model that is also used by OpenCV’s intrinsic calibration tool and by
matlab. Once, these parameters are known, lens-undistortion is
performed per-pixel (internally efficiently optimized using a
warp-table) on an application’s internal input image. Therefore, the
application can then simply assume a non-distorted camera image so
that the linear pinhole camera model completely describes the camera
projection.</p>
<p>Details, examples and a step-by-step description is given in
<a class="reference internal" href="../howtos/camera-calibration.html#howto-camcalib"><span class="std std-ref">Camera Calibration</span></a>.</p>
</div>
<div class="section" id="other-classes">
<span id="io-others"></span><h2>Other Classes<a class="headerlink" href="#other-classes" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="../icl-api/classicl_1_1io_1_1JPEGEncoder.html">JPEGEncoder</a> and <a class="reference external" href="../icl-api/classicl_1_1io_1_1JPEGDecoder.html">JPEGDecoder</a></p>
<blockquote>
<div>These are used at several locations. First of all for reading and
writing jpeg images, but also shared-memory- and rsb-based inter
process communication can be optimized using jpeg compression.  The
decoder is also used for motion-jpeg decoding.</div></blockquote>
<p><a class="reference external" href="../icl-api/classicl_1_1io_1_1FileList.html">FileList</a></p>
<blockquote>
<div>The file list can be used to expand bash-style file patterns, such
as “images/*.png”. Once instantiated, the file list provides
lexicographically ordered random access to the matching
files. Usually, this must not be used manually, as it is automatically
used if the <a class="reference external" href="../icl-api/classicl_1_1io_1_1GenericGrabber.html">GenericGrabber</a> is instantiated with a “file”
<em>backend  selector</em>.</div></blockquote>
<p><a class="reference external" href="../icl-api/classicl_1_1io_1_1FilenameGenerator.html">FilenameGenerator</a></p>
<blockquote>
<div>The <a class="reference external" href="../icl-api/classicl_1_1io_1_1FilenameGenerator.html">FilenameGenerator</a> allows for creating incremental file-names
such as “image-001.png”, “image-002.png”, etc. For this, a given
pattern string must contain a connected set of hashes
(e.g. “image-###.png”). The more hashes are used, the more trailing
zeros are inserted</div></blockquote>
<p><a class="reference external" href="../icl-api/classicl_1_1io_1_1ImageCompressor.html">ImageCompressor</a></p>
<blockquote>
<div>The image compressor is used to create the binary ICL image formats
<strong>bicl</strong>, <strong>jicl</strong> and also the <strong>rleX</strong>-formats. Actually its
image serialization is also used for shared-memory- and rsb-based
network communication</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Image In- and Output</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li><a class="reference internal" href="#the-generic-grabber">The Generic Grabber</a><ul>
<li><a class="reference internal" href="#device-selection-from-command-line">Device Selection from Command Line</a></li>
<li><a class="reference internal" href="#adapting-camera-properties-from-command-line">Adapting Camera Properties from Command Line</a></li>
<li><a class="reference internal" href="#adapting-camera-properties-remotely">Adapting Camera Properties Remotely</a></li>
<li><a class="reference internal" href="#list-of-supported-grabber-backends">List of Supported Grabber Backends</a></li>
<li><a class="reference internal" href="#supported-image-file-types">Supported Image File Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-generic-image-output">The Generic Image Output</a><ul>
<li><a class="reference internal" href="#output-selection-from-command-line">Output Selection from Command Line</a></li>
<li><a class="reference internal" href="#list-of-supported-output-backends">List of Supported Output Backends</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-colorformatdecoder">The ColorFormatDecoder</a></li>
<li><a class="reference internal" href="#intrinsic-camera-calibration">Intrinsic Camera Calibration</a></li>
<li><a class="reference internal" href="#other-classes">Other Classes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="filter.html"
                        title="previous chapter">Unary- and Binary Image Filters</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="qt.html"
                        title="next chapter">GUI Creation and Visualization Framework</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="qt.html" title="GUI Creation and Visualization Framework"
             >next</a> |</li>
        <li class="right" >
          <a href="filter.html" title="Unary- and Binary Image Filters"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">ICL Manual</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../modules.html" >Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2019, Christof Elbrechter, Michael Götting, Robert Haschke, Alexander Neumann.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>